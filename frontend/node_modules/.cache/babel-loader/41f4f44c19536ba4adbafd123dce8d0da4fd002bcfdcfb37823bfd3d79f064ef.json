{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _events = _interopRequireDefault(require(\"events\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n// The number of seconds before the token expires, when\n// we will already try to refresh it\nvar TOKEN_BUFFER = 10;\n\n/**\n  * A helper library to create and maintain the OAuth2 AccessTokens between\n  * requests. Keeps track of the expiry time and automatically tries to fetch\n  * a new token if needed.\n  *\n  * @property {string} accessToken the cached current access token (bearer)\n  * @property {number} expiresAt the aproximate time this token expires at\n  * @protected\n  */\nvar AccessToken = /*#__PURE__*/function () {\n  function AccessToken() {\n    _classCallCheck(this, AccessToken);\n    this.accessToken;\n    this.expiresAt;\n  }\n\n  // PROTECTED\n\n  /**\n   * Fetches or returns a cached bearer token. Used by the Client to get a\n   * token before making an API call.\n   *\n   * @param  {Client} client the Amadeus Client to make an API call with\n   * @return {Promise.<Response,ResponseError>} a Bluebird Promise\n   * @protected\n   */\n  _createClass(AccessToken, [{\n    key: \"bearerToken\",\n    value: function bearerToken(client) {\n      var emitter = new _events[\"default\"]();\n      var promise = this.promise(emitter);\n      this.emitOrLoadAccessToken(client, emitter);\n      return promise;\n    }\n\n    // PRIVATE\n\n    /**\n     * Builds a Bluebird promise to be returned to the API user\n     *\n     * @param  {type} emitter the EventEmitter used to notify the Promise of\n     * @return {Promise} a Bluebird promise\n     * @private\n     */\n  }, {\n    key: \"promise\",\n    value: function promise(emitter) {\n      return new Promise(function (resolve, reject) {\n        emitter.on('resolve', function (response) {\n          return resolve(response);\n        });\n        emitter.on('reject', function (error) {\n          return reject(error);\n        });\n      });\n    }\n\n    /**\n     * Checks if the token needs a refresh, if not emits the cached token,\n     * otherwise tries to load a new access token\n     *\n     * @param  {Client} client the Amadeus Client to make an API call with\n     * @param  {type} emitter the EventEmitter used to emit the token\n     * @private\n     */\n  }, {\n    key: \"emitOrLoadAccessToken\",\n    value: function emitOrLoadAccessToken(client, emitter) {\n      if (this.needsLoadOrRefresh()) {\n        this.loadAccessToken(client, emitter);\n      } else {\n        emitter.emit('resolve', this.accessToken);\n      }\n    }\n\n    /**\n     * Checks if the token needs a refresh or first load\n     *\n     * @return {boolean} wether the token needs a refresh\n     * @private\n     */\n  }, {\n    key: \"needsLoadOrRefresh\",\n    value: function needsLoadOrRefresh() {\n      if (!this.accessToken) {\n        return true;\n      } else if (Date.now() + TOKEN_BUFFER > this.expiresAt) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    /**\n     * Loads the access token using the client, emits the token when it's loaded\n     *\n     * @param  {Client} client the Amadeus Client to make an API call with\n     * @param  {type} emitter the EventEmitter used to emit the token\n     * @private\n     */\n  }, {\n    key: \"loadAccessToken\",\n    value: function loadAccessToken(client, emitter) {\n      var _this = this;\n      client.unauthenticatedRequest('POST', '/v1/security/oauth2/token', {\n        'grant_type': 'client_credentials',\n        'client_id': client.clientId,\n        'client_secret': client.clientSecret\n      }).then(function (response) {\n        _this.storeAccessToken(response);\n        _this.emitOrLoadAccessToken(client, emitter);\n      })[\"catch\"](function (error) {\n        emitter.emit('reject', error);\n      });\n    }\n\n    /**\n     * Stores a loaded access token, calculating the expiry date\n     *\n     * @param  {Response} response the response object received from the client\n     * @private\n     */\n  }, {\n    key: \"storeAccessToken\",\n    value: function storeAccessToken(response) {\n      this.accessToken = response.result['access_token'];\n      this.expiresAt = Date.now() + response.result['expires_in'] * 1000;\n    }\n  }]);\n  return AccessToken;\n}();\nvar _default = AccessToken;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;","map":{"version":3,"names":["_events","_interopRequireDefault","require","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","TOKEN_BUFFER","AccessToken","accessToken","expiresAt","value","bearerToken","client","emitter","promise","emitOrLoadAccessToken","Promise","resolve","reject","on","response","error","needsLoadOrRefresh","loadAccessToken","emit","Date","now","_this","unauthenticatedRequest","clientId","clientSecret","then","storeAccessToken","result","_default","exports","module","default"],"sources":["/Users/yuvrajchhetri/Desktop/Travel-booking-napptive-hackathon/frontend/react-auth/node_modules/amadeus/src/amadeus/client/access_token.js"],"sourcesContent":["import EventEmitter from 'events';\n\n// The number of seconds before the token expires, when\n// we will already try to refresh it\nconst TOKEN_BUFFER = 10;\n\n/**\n  * A helper library to create and maintain the OAuth2 AccessTokens between\n  * requests. Keeps track of the expiry time and automatically tries to fetch\n  * a new token if needed.\n  *\n  * @property {string} accessToken the cached current access token (bearer)\n  * @property {number} expiresAt the aproximate time this token expires at\n  * @protected\n  */\nclass AccessToken {\n  constructor() {\n    this.accessToken;\n    this.expiresAt;\n  }\n\n  // PROTECTED\n\n  /**\n   * Fetches or returns a cached bearer token. Used by the Client to get a\n   * token before making an API call.\n   *\n   * @param  {Client} client the Amadeus Client to make an API call with\n   * @return {Promise.<Response,ResponseError>} a Bluebird Promise\n   * @protected\n   */\n  bearerToken(client) {\n    let emitter = new EventEmitter();\n    let promise = this.promise(emitter);\n    this.emitOrLoadAccessToken(client, emitter);\n    return promise;\n  }\n\n  // PRIVATE\n\n  /**\n   * Builds a Bluebird promise to be returned to the API user\n   *\n   * @param  {type} emitter the EventEmitter used to notify the Promise of\n   * @return {Promise} a Bluebird promise\n   * @private\n   */\n  promise(emitter) {\n    return new Promise((resolve, reject) => {\n      emitter.on('resolve', response => resolve(response));\n      emitter.on('reject', error => reject(error));\n    });\n  }\n\n\n  /**\n   * Checks if the token needs a refresh, if not emits the cached token,\n   * otherwise tries to load a new access token\n   *\n   * @param  {Client} client the Amadeus Client to make an API call with\n   * @param  {type} emitter the EventEmitter used to emit the token\n   * @private\n   */\n  emitOrLoadAccessToken(client, emitter) {\n    if (this.needsLoadOrRefresh()) { this.loadAccessToken(client, emitter); }\n    else { emitter.emit('resolve', this.accessToken); }\n  }\n\n  /**\n   * Checks if the token needs a refresh or first load\n   *\n   * @return {boolean} wether the token needs a refresh\n   * @private\n   */\n  needsLoadOrRefresh() {\n    if (!this.accessToken) { return true; }\n    else if ((Date.now() + TOKEN_BUFFER) > this.expiresAt) { return true; }\n    else { return false; }\n  }\n\n\n  /**\n   * Loads the access token using the client, emits the token when it's loaded\n   *\n   * @param  {Client} client the Amadeus Client to make an API call with\n   * @param  {type} emitter the EventEmitter used to emit the token\n   * @private\n   */\n  loadAccessToken(client, emitter) {\n    client.unauthenticatedRequest('POST', '/v1/security/oauth2/token', {\n      'grant_type' : 'client_credentials',\n      'client_id' : client.clientId,\n      'client_secret' : client.clientSecret\n    }).then((response) => {\n      this.storeAccessToken(response);\n      this.emitOrLoadAccessToken(client, emitter);\n    }).catch((error) => {\n      emitter.emit('reject', error);\n    });\n  }\n\n  /**\n   * Stores a loaded access token, calculating the expiry date\n   *\n   * @param  {Response} response the response object received from the client\n   * @private\n   */\n  storeAccessToken(response) {\n    this.accessToken = response.result['access_token'];\n    this.expiresAt = Date.now() + (response.result['expires_in'] * 1000);\n  }\n}\n\nexport default AccessToken;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}